<div>
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
    <h2 style="margin:0">Messages</h2>
    <div>
      <button (click)="reload()" style="padding:8px 12px;border-radius:8px">Refresh</button>
    </div>
  </div>

  <div *ngIf="loading" style="padding:12px;background:var(--card);border:1px solid var(--border);border-radius:8px;margin-bottom:12px">
    Loading messages...
  </div>

  <div *ngIf="lastError" style="padding:12px;background:#fff1f2;border:1px solid rgba(127,29,29,0.12);border-radius:8px;margin-bottom:12px;color:#7f1d1d">
    {{ lastError }}
  </div>

  <table *ngIf="!loading" style="width:100%;border-collapse:collapse">
    <thead>
      <tr style="text-align:left;border-bottom:1px solid var(--border)">
        <th style="padding:8px">From</th>
        <th style="padding:8px">Email</th>
        <th style="padding:8px">Subject</th>
        <th style="padding:8px">Message</th>
        <th style="padding:8px">Date</th>
        <th style="padding:8px">Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let m of messages" style="border-bottom:1px solid rgba(0,0,0,0.04)">
        <td style="padding:8px;vertical-align:middle">{{ m.name || m.from || '—' }}</td>
        <td style="padding:8px;vertical-align:middle">{{ m.email || m.fromEmail || '—' }}</td>
        <td style="padding:8px;vertical-align:middle">{{ m.subject || '—' }}</td>
        <td style="padding:8px;vertical-align:middle;max-width:360px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">{{ m.message || m.body || '—' }}</td>
        <td style="padding:8px;vertical-align:middle">{{ m.date ? (m.date | date:'medium') : (m.createdAt ? (m.createdAt | date:'medium') : '') }}</td>
        <td style="padding:8px;vertical-align:middle">
          <button (click)="onDelete(m._id || m.id)" style="padding:6px 8px;border-radius:6px">Delete</button>
        </td>
      </tr>

      <tr *ngIf="messages.length === 0">
        <td colspan="6" style="padding:12px;text-align:center;color:var(--muted-foreground)">No messages yet.</td>
      </tr>
    </tbody>
  </table>
</div>
